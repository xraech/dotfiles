#!/bin/dash
app=$(command -v pactl || command -v amixer) || exit
STEP=1
DEFAULTVOLUME=70
MUTED=`(amixer sget 'Master'| grep -o '\[o.*')`
if [ "$1" = "up" ]; then
	if [ "$(expr $volume + $STEP)" -lt 100 ]; then
		amixer sset 'Master' $STEP%+
	else
		amixer sset 'Master' 100%
	fi
	ICON=$HOME/.config/bin/icons/volume.png
	si=
elif [ "$1" = "down" ]; then
	amixer sset 'Master' $STEP%-
	ICON=$HOME/.config/bin/icons/down.png
	si=

elif [ "$1" = "toggle" ]; then
	amixer sset 'Master' toggle
	if [ "$MUTED" = "[on]" ]; then
		ICON=$HOME/.config/bin/icons/volume.png
		si=
	else
		ICON=$HOME/.config/bin/icons/mute.png
		si=
	fi
fi
volume=`(amixer sget Master | awk -F '[][]' '{gsub("%",""); print $2 }' | tail -n 1)`

bar=$($HOME/.config/bin/getprogressstring 10 "" "" ${volume})
echo $bar
msgId="991049"

notify-send -h string:x-canonical-private-synchronous:anything -a "clock_notifier" -u low "${si} ${bar} ${volume}%"
